<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Section: 12 🔖 Predictions with rpart | bookdemo.knit</title>
  <meta name="description" content="" />
  <meta name="generator" content="bookdown 0.26 and GitBook 2.6.7" />

  <meta property="og:title" content="Section: 12 🔖 Predictions with rpart | bookdemo.knit" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Section: 12 🔖 Predictions with rpart | bookdemo.knit" />
  
  
  




  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="Free_style.html"/>
<link rel="next" href="Linear_regression.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">DATA 101 Book</a>
<a href="https://github.com/dev7796/data101_tutorial" target="blank">Github Source</a>
<a href="https://b.socrative.com/teacher/#launch" target="blank">Socrative Quiz</a>
<a href="https://dev7796.shinyapps.io/testing_button/" target="black">Question Roulette</a>
<a href="http://ds1778.shinyapps.io/test_yourself_" target="blank">Test Yourself</a>
</li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="Setting_up_R.html"><a href="Setting_up_R.html"><i class="fa fa-check"></i><b>2</b> Setting Up R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="Setting_up_R.html"><a href="Setting_up_R.html#setting"><i class="fa fa-check"></i><b>2.1</b> Create New Project</a></li>
<li class="chapter" data-level="2.2" data-path="Setting_up_R.html"><a href="Setting_up_R.html#how-to-upload-a-data-set"><i class="fa fa-check"></i><b>2.2</b> How to upload a data set?</a></li>
<li class="chapter" data-level="2.3" data-path="Setting_up_R.html"><a href="Setting_up_R.html#saving-your-work"><i class="fa fa-check"></i><b>2.3</b> Saving your work</a></li>
<li class="chapter" data-level="2.4" data-path="Setting_up_R.html"><a href="Setting_up_R.html#general-r-references"><i class="fa fa-check"></i><b>2.4</b> General R References</a></li>
<li class="chapter" data-level="2.5" data-path="Setting_up_R.html"><a href="Setting_up_R.html#textbook-concepts"><i class="fa fa-check"></i><b>2.5</b> Textbook Concepts</a></li>
<li class="chapter" data-level="2.6" data-path="Setting_up_R.html"><a href="Setting_up_R.html#r-functions-used-in-this-class"><i class="fa fa-check"></i><b>2.6</b> R functions used in this class</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="FreeStyle.html"><a href="FreeStyle.html"><i class="fa fa-check"></i><b>3</b> 🔖 Data puzzles</a>
<ul>
<li class="chapter" data-level="3.1" data-path="FreeStyle.html"><a href="FreeStyle.html#strange-grading-methods-of-professor-moody-data-puzzle"><i class="fa fa-check"></i><b>3.1</b> Strange grading methods of Professor Moody Data Puzzle</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="FreeStyle.html"><a href="FreeStyle.html#practice-snippets"><i class="fa fa-check"></i><b>3.1.1</b> Practice Snippets</a></li>
<li class="chapter" data-level="3.1.2" data-path="FreeStyle.html"><a href="FreeStyle.html#moody-data-quiz"><i class="fa fa-check"></i><b>3.1.2</b> Moody Data Quiz</a></li>
<li class="chapter" data-level="3.1.3" data-path="FreeStyle.html"><a href="FreeStyle.html#check1"><i class="fa fa-check"></i><b>3.1.3</b> Check yourself</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="FreeStyle.html"><a href="FreeStyle.html#how-to-predict-a-good-party-data-puzzle"><i class="fa fa-check"></i><b>3.2</b> How to predict a good party? Data puzzle</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="FreeStyle.html"><a href="FreeStyle.html#practice-snippets-1"><i class="fa fa-check"></i><b>3.2.1</b> Practice Snippets</a></li>
<li class="chapter" data-level="3.2.2" data-path="FreeStyle.html"><a href="FreeStyle.html#party-data-quiz"><i class="fa fa-check"></i><b>3.2.2</b> Party Data Quiz</a></li>
<li class="chapter" data-level="3.2.3" data-path="FreeStyle.html"><a href="FreeStyle.html#check3"><i class="fa fa-check"></i><b>3.2.3</b> Check yourself</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="FreeStyle.html"><a href="FreeStyle.html#when-election-is-truly-local---data-puzzle"><i class="fa fa-check"></i><b>3.3</b> When election is truly local - data puzzle</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="FreeStyle.html"><a href="FreeStyle.html#election-data-quiz"><i class="fa fa-check"></i><b>3.3.1</b> Election Data Quiz</a></li>
<li class="chapter" data-level="3.3.2" data-path="FreeStyle.html"><a href="FreeStyle.html#check4"><i class="fa fa-check"></i><b>3.3.2</b> Check yourself</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="FreeStyle.html"><a href="FreeStyle.html#secrets-of-good-sleep-data-puzzle"><i class="fa fa-check"></i><b>3.4</b> Secrets of good sleep Data Puzzle</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="FreeStyle.html"><a href="FreeStyle.html#practice-snippets-2"><i class="fa fa-check"></i><b>3.4.1</b> Practice Snippets</a></li>
<li class="chapter" data-level="3.4.2" data-path="FreeStyle.html"><a href="FreeStyle.html#sleep-data-quiz"><i class="fa fa-check"></i><b>3.4.2</b> Sleep Data Quiz</a></li>
<li class="chapter" data-level="3.4.3" data-path="FreeStyle.html"><a href="FreeStyle.html#check5"><i class="fa fa-check"></i><b>3.4.3</b> Check yourself</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="FreeStyle.html"><a href="FreeStyle.html#lets-go-to-the-movies-data-puzzle"><i class="fa fa-check"></i><b>3.5</b> Let’s go to the movies: Data Puzzle</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="FreeStyle.html"><a href="FreeStyle.html#practice-snippets-3"><i class="fa fa-check"></i><b>3.5.1</b> Practice Snippets</a></li>
<li class="chapter" data-level="3.5.2" data-path="FreeStyle.html"><a href="FreeStyle.html#movies-data-quiz"><i class="fa fa-check"></i><b>3.5.2</b> Movies Data Quiz</a></li>
<li class="chapter" data-level="3.5.3" data-path="FreeStyle.html"><a href="FreeStyle.html#check6"><i class="fa fa-check"></i><b>3.5.3</b> Check yourself</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="FreeStyle.html"><a href="FreeStyle.html#when-canvas-goes-wild-data-puzzle"><i class="fa fa-check"></i><b>3.6</b> When canvas goes wild data puzzle</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="FreeStyle.html"><a href="FreeStyle.html#practice-snippets-4"><i class="fa fa-check"></i><b>3.6.1</b> Practice Snippets</a></li>
<li class="chapter" data-level="3.6.2" data-path="FreeStyle.html"><a href="FreeStyle.html#canvas-data-quiz"><i class="fa fa-check"></i><b>3.6.2</b> Canvas Data Quiz</a></li>
<li class="chapter" data-level="3.6.3" data-path="FreeStyle.html"><a href="FreeStyle.html#check7"><i class="fa fa-check"></i><b>3.6.3</b> Check yourself</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="FreeStyle.html"><a href="FreeStyle.html#very-local-minimarket-data-puzzle"><i class="fa fa-check"></i><b>3.7</b> Very local minimarket data puzzle</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="FreeStyle.html"><a href="FreeStyle.html#practice-snippets-5"><i class="fa fa-check"></i><b>3.7.1</b> Practice Snippets</a></li>
<li class="chapter" data-level="3.7.2" data-path="FreeStyle.html"><a href="FreeStyle.html#minimarket-data-quiz"><i class="fa fa-check"></i><b>3.7.2</b> MiniMarket Data Quiz</a></li>
<li class="chapter" data-level="3.7.3" data-path="FreeStyle.html"><a href="FreeStyle.html#check8"><i class="fa fa-check"></i><b>3.7.3</b> Check yourself</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="FreeStyle.html"><a href="FreeStyle.html#addiotional-reference"><i class="fa fa-check"></i><b>3.8</b> Addiotional Reference</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="plots.html"><a href="plots.html"><i class="fa fa-check"></i><b>4</b> 🔖 Plots</a>
<ul>
<li class="chapter" data-level="4.1" data-path="plots.html"><a href="plots.html#vector"><i class="fa fa-check"></i><b>4.1</b> Vector</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="plots.html"><a href="plots.html#snippet-1-4"><i class="fa fa-check"></i><b>4.1.1</b> Snippet 1</a></li>
<li class="chapter" data-level="4.1.2" data-path="plots.html"><a href="plots.html#snippet-2-6"><i class="fa fa-check"></i><b>4.1.2</b> Snippet 2</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="plots.html"><a href="plots.html#data-frames"><i class="fa fa-check"></i><b>4.2</b> Data Frames</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="plots.html"><a href="plots.html#snippet-1-5"><i class="fa fa-check"></i><b>4.2.1</b> Snippet 1</a></li>
<li class="chapter" data-level="4.2.2" data-path="plots.html"><a href="plots.html#snippet-2-7"><i class="fa fa-check"></i><b>4.2.2</b> Snippet 2</a></li>
<li class="chapter" data-level="4.2.3" data-path="plots.html"><a href="plots.html#snippet-3-6"><i class="fa fa-check"></i><b>4.2.3</b> Snippet 3</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="plots.html"><a href="plots.html#table"><i class="fa fa-check"></i><b>4.3</b> Table</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="plots.html"><a href="plots.html#snippet-1-6"><i class="fa fa-check"></i><b>4.3.1</b> Snippet 1</a></li>
<li class="chapter" data-level="4.3.2" data-path="plots.html"><a href="plots.html#code-review"><i class="fa fa-check"></i><b>4.3.2</b> Code Review</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="plots.html"><a href="plots.html#scartterplot"><i class="fa fa-check"></i><b>4.4</b> Scatter Plot</a></li>
<li class="chapter" data-level="4.5" data-path="plots.html"><a href="plots.html#barplot"><i class="fa fa-check"></i><b>4.5</b> Bar Plot</a></li>
<li class="chapter" data-level="4.6" data-path="plots.html"><a href="plots.html#boxplot"><i class="fa fa-check"></i><b>4.6</b> Box Plot</a></li>
<li class="chapter" data-level="4.7" data-path="plots.html"><a href="plots.html#mosaicplot"><i class="fa fa-check"></i><b>4.7</b> Mosaic Plot</a></li>
<li class="chapter" data-level="4.8" data-path="plots.html"><a href="plots.html#additional-references"><i class="fa fa-check"></i><b>4.8</b> Additional References</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="tapply_subsetting.html"><a href="tapply_subsetting.html"><i class="fa fa-check"></i><b>5</b> 🔖 Data Transformation</a>
<ul>
<li class="chapter" data-level="5.1" data-path="tapply_subsetting.html"><a href="tapply_subsetting.html#basic-functions"><i class="fa fa-check"></i><b>5.1</b> Basic Functions</a>
<ul>
<li class="chapter" data-level="5.1.1" data-path="tapply_subsetting.html"><a href="tapply_subsetting.html#mean"><i class="fa fa-check"></i><b>5.1.1</b> mean()</a></li>
<li class="chapter" data-level="5.1.2" data-path="tapply_subsetting.html"><a href="tapply_subsetting.html#length"><i class="fa fa-check"></i><b>5.1.2</b> length()</a></li>
<li class="chapter" data-level="5.1.3" data-path="tapply_subsetting.html"><a href="tapply_subsetting.html#max"><i class="fa fa-check"></i><b>5.1.3</b> max()</a></li>
<li class="chapter" data-level="5.1.4" data-path="tapply_subsetting.html"><a href="tapply_subsetting.html#min"><i class="fa fa-check"></i><b>5.1.4</b> min()</a></li>
<li class="chapter" data-level="5.1.5" data-path="tapply_subsetting.html"><a href="tapply_subsetting.html#sd"><i class="fa fa-check"></i><b>5.1.5</b> sd()</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="tapply_subsetting.html"><a href="tapply_subsetting.html#subset"><i class="fa fa-check"></i><b>5.2</b> Subset</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="tapply_subsetting.html"><a href="tapply_subsetting.html#nrow"><i class="fa fa-check"></i><b>5.2.1</b> Snippet 1- example of subset function</a></li>
<li class="chapter" data-level="5.2.2" data-path="tapply_subsetting.html"><a href="tapply_subsetting.html#snippet-2--example-of-subset-function"><i class="fa fa-check"></i><b>5.2.2</b> Snippet 2- example of subset function</a></li>
<li class="chapter" data-level="5.2.3" data-path="tapply_subsetting.html"><a href="tapply_subsetting.html#snippet-3--subset-as-subframe"><i class="fa fa-check"></i><b>5.2.3</b> Snippet 3- subset as subframe</a></li>
<li class="chapter" data-level="5.2.4" data-path="tapply_subsetting.html"><a href="tapply_subsetting.html#snippet-4--subsetting-columns"><i class="fa fa-check"></i><b>5.2.4</b> Snippet 4- subsetting columns</a></li>
<li class="chapter" data-level="5.2.5" data-path="tapply_subsetting.html"><a href="tapply_subsetting.html#snippet-5--sub-setting-rows-and-columns"><i class="fa fa-check"></i><b>5.2.5</b> Snippet 5- sub-setting rows and columns</a></li>
<li class="chapter" data-level="5.2.6" data-path="tapply_subsetting.html"><a href="tapply_subsetting.html#code-review-1"><i class="fa fa-check"></i><b>5.2.6</b> Code Review</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="tapply_subsetting.html"><a href="tapply_subsetting.html#tapply"><i class="fa fa-check"></i><b>5.3</b> tapply</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="tapply_subsetting.html"><a href="tapply_subsetting.html#snippet-1--example-of-tapply-followed-by-barplot"><i class="fa fa-check"></i><b>5.3.1</b> Snippet 1- Example of tapply followed by barplot</a></li>
<li class="chapter" data-level="5.3.2" data-path="tapply_subsetting.html"><a href="tapply_subsetting.html#code-review-2"><i class="fa fa-check"></i><b>5.3.2</b> Code Review</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="tapply_subsetting.html"><a href="tapply_subsetting.html#derived-attribute"><i class="fa fa-check"></i><b>5.4</b> Derived Attribute</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="tapply_subsetting.html"><a href="tapply_subsetting.html#snippet-1---making-new-categorical-attribute."><i class="fa fa-check"></i><b>5.4.1</b> Snippet 1 - Making new categorical attribute.</a></li>
<li class="chapter" data-level="5.4.2" data-path="tapply_subsetting.html"><a href="tapply_subsetting.html#cut"><i class="fa fa-check"></i><b>5.4.2</b> Cut</a></li>
<li class="chapter" data-level="5.4.3" data-path="tapply_subsetting.html"><a href="tapply_subsetting.html#code-review-3"><i class="fa fa-check"></i><b>5.4.3</b> Code Review</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="tapply_subsetting.html"><a href="tapply_subsetting.html#additional-references-1"><i class="fa fa-check"></i><b>5.5</b> Additional references</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="hypothesis_testing.html"><a href="hypothesis_testing.html"><i class="fa fa-check"></i><b>6</b> 🔖 Hypothesis Testing</a>
<ul>
<li class="chapter" data-level="6.1" data-path="hypothesis_testing.html"><a href="hypothesis_testing.html#introduction"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="hypothesis_testing.html"><a href="hypothesis_testing.html#permutaion"><i class="fa fa-check"></i><b>6.2</b> Snippet 1: Permutation test</a></li>
<li class="chapter" data-level="6.3" data-path="hypothesis_testing.html"><a href="hypothesis_testing.html#ztests"><i class="fa fa-check"></i><b>6.3</b> Snippet 2: z-test</a></li>
<li class="chapter" data-level="6.4" data-path="hypothesis_testing.html"><a href="hypothesis_testing.html#snippet-3-make-your-own-data-and-see-how-p-value-changes"><i class="fa fa-check"></i><b>6.4</b> Snippet 3: Make your own data and see how p-value changes</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="hypothesis_testing.html"><a href="hypothesis_testing.html#permuation-test"><i class="fa fa-check"></i><b>6.4.1</b> Permuation test</a></li>
<li class="chapter" data-level="6.4.2" data-path="hypothesis_testing.html"><a href="hypothesis_testing.html#one-permutation-at-a-time"><i class="fa fa-check"></i><b>6.4.2</b> One permutation at a time</a></li>
<li class="chapter" data-level="6.4.3" data-path="hypothesis_testing.html"><a href="hypothesis_testing.html#z-test"><i class="fa fa-check"></i><b>6.4.3</b> z-test</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="hypothesis_testing.html"><a href="hypothesis_testing.html#additional-references-2"><i class="fa fa-check"></i><b>6.5</b> Additional References</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="Chisquare.html"><a href="Chisquare.html"><i class="fa fa-check"></i><b>7</b> 🔖 Test of Independence</a>
<ul>
<li class="chapter" data-level="7.1" data-path="Chisquare.html"><a href="Chisquare.html#introduction-1"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="Chisquare.html"><a href="Chisquare.html#snippet-1-8"><i class="fa fa-check"></i><b>7.2</b> Snippet 1</a></li>
<li class="chapter" data-level="7.3" data-path="Chisquare.html"><a href="Chisquare.html#snippet-2-8"><i class="fa fa-check"></i><b>7.3</b> Snippet 2</a></li>
<li class="chapter" data-level="7.4" data-path="Chisquare.html"><a href="Chisquare.html#snippet-3-7"><i class="fa fa-check"></i><b>7.4</b> Snippet 3</a></li>
<li class="chapter" data-level="7.5" data-path="Chisquare.html"><a href="Chisquare.html#snippet-4-6"><i class="fa fa-check"></i><b>7.5</b> Snippet 4</a></li>
<li class="chapter" data-level="7.6" data-path="Chisquare.html"><a href="Chisquare.html#additional-reference"><i class="fa fa-check"></i><b>7.6</b> Additional Reference</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="Multiple_Hypothesis.html"><a href="Multiple_Hypothesis.html"><i class="fa fa-check"></i><b>8</b> 🔖 Multiple Hypothesis Testing</a>
<ul>
<li class="chapter" data-level="8.1" data-path="Multiple_Hypothesis.html"><a href="Multiple_Hypothesis.html#introduction-2"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2" data-path="Multiple_Hypothesis.html"><a href="Multiple_Hypothesis.html#additional-references-3"><i class="fa fa-check"></i><b>8.2</b> Additional References</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="common_sense.html"><a href="common_sense.html"><i class="fa fa-check"></i><b>9</b> 🔖 Common Sense Judgement and Probability</a>
<ul>
<li class="chapter" data-level="9.1" data-path="common_sense.html"><a href="common_sense.html#introduction-3"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path="common_sense.html"><a href="common_sense.html#additional-references-4"><i class="fa fa-check"></i><b>9.2</b> Additional References</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="bayesian_reasoning.html"><a href="bayesian_reasoning.html"><i class="fa fa-check"></i><b>10</b> 🔖 Bayesian Reasoning</a>
<ul>
<li class="chapter" data-level="10.1" data-path="bayesian_reasoning.html"><a href="bayesian_reasoning.html#introduction-4"><i class="fa fa-check"></i><b>10.1</b> Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="bayesian_reasoning.html"><a href="bayesian_reasoning.html#snippet-1-covid-odds-after-positive-home-test."><i class="fa fa-check"></i><b>10.2</b> Snippet 1: Covid Odds after positive Home Test.</a></li>
<li class="chapter" data-level="10.3" data-path="bayesian_reasoning.html"><a href="bayesian_reasoning.html#snippet-2-what-are-the-odds-that-an-f-student-is-a-freshman"><i class="fa fa-check"></i><b>10.3</b> Snippet 2: What are the odds that an ‘F’ student is a freshman?</a></li>
<li class="chapter" data-level="10.4" data-path="bayesian_reasoning.html"><a href="bayesian_reasoning.html#snippet-3-what-are-the-odds-that-a-a-student-with-the-score-less-than-80-is-a-psychology-major"><i class="fa fa-check"></i><b>10.4</b> Snippet 3: What are the odds that a ‘A’ student with the score less than 80 is a psychology major?</a></li>
<li class="chapter" data-level="10.5" data-path="bayesian_reasoning.html"><a href="bayesian_reasoning.html#additinal-reference"><i class="fa fa-check"></i><b>10.5</b> Additinal Reference</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="Free_style.html"><a href="Free_style.html"><i class="fa fa-check"></i><b>11</b> 🔖 Free Style: Prediction</a>
<ul>
<li class="chapter" data-level="11.1" data-path="Free_style.html"><a href="Free_style.html#snippet-1-example-of-a-simple-freestyle-prediction-model"><i class="fa fa-check"></i><b>11.1</b> Snippet 1: Example of a simple freestyle prediction model</a></li>
<li class="chapter" data-level="11.2" data-path="Free_style.html"><a href="Free_style.html#snippet-2-how-to-build-a-freestyle-your-own-code-prediction-model"><i class="fa fa-check"></i><b>11.2</b> Snippet 2: How to build a freestyle (your own code) prediction model?</a></li>
<li class="chapter" data-level="11.3" data-path="Free_style.html"><a href="Free_style.html#snippet-3-one-step-crossvalidation"><i class="fa fa-check"></i><b>11.3</b> Snippet 3: One-step crossvalidation</a></li>
<li class="chapter" data-level="11.4" data-path="Free_style.html"><a href="Free_style.html#general-structure-of-the-prediction-challenges"><i class="fa fa-check"></i><b>11.4</b> General Structure of the Prediction Challenges</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="Free_style.html"><a href="Free_style.html#snippet-4-preparing-submission.csv-for-kaggle"><i class="fa fa-check"></i><b>11.4.1</b> Snippet 4: Preparing submission.csv for Kaggle</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="Free_style.html"><a href="Free_style.html#additional-reference-1"><i class="fa fa-check"></i><b>11.5</b> Additional Reference</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="Decision_trees.html"><a href="Decision_trees.html"><i class="fa fa-check"></i><b>12</b> 🔖 Predictions with rpart</a>
<ul>
<li class="chapter" data-level="12.1" data-path="Decision_trees.html"><a href="Decision_trees.html#introduction-5"><i class="fa fa-check"></i><b>12.1</b> Introduction</a></li>
<li class="chapter" data-level="12.2" data-path="Decision_trees.html"><a href="Decision_trees.html#rpart"><i class="fa fa-check"></i><b>12.2</b> Use of Rpart</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="Decision_trees.html"><a href="Decision_trees.html#snippet-1-9"><i class="fa fa-check"></i><b>12.2.1</b> Snippet 1</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="Decision_trees.html"><a href="Decision_trees.html#rpartplot"><i class="fa fa-check"></i><b>12.3</b> Visualize the Decision tree</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="Decision_trees.html"><a href="Decision_trees.html#snippet-2-9"><i class="fa fa-check"></i><b>12.3.1</b> Snippet 2</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="Decision_trees.html"><a href="Decision_trees.html#rpartcontrol"><i class="fa fa-check"></i><b>12.4</b> Rpart Control</a>
<ul>
<li class="chapter" data-level="12.4.1" data-path="Decision_trees.html"><a href="Decision_trees.html#snippet-3-minsplit-200"><i class="fa fa-check"></i><b>12.4.1</b> Snippet 3: Minsplit = 200</a></li>
<li class="chapter" data-level="12.4.2" data-path="Decision_trees.html"><a href="Decision_trees.html#snippet-4-minsplit-100"><i class="fa fa-check"></i><b>12.4.2</b> Snippet 4: Minsplit = 100</a></li>
<li class="chapter" data-level="12.4.3" data-path="Decision_trees.html"><a href="Decision_trees.html#snippet-5-minbucket-100"><i class="fa fa-check"></i><b>12.4.3</b> Snippet 5: Minbucket = 100</a></li>
<li class="chapter" data-level="12.4.4" data-path="Decision_trees.html"><a href="Decision_trees.html#snippet-6-minbucket-200"><i class="fa fa-check"></i><b>12.4.4</b> Snippet 6: Minbucket = 200</a></li>
<li class="chapter" data-level="12.4.5" data-path="Decision_trees.html"><a href="Decision_trees.html#snippet-7-cp-0.05"><i class="fa fa-check"></i><b>12.4.5</b> Snippet 7: cp = 0.05</a></li>
<li class="chapter" data-level="12.4.6" data-path="Decision_trees.html"><a href="Decision_trees.html#snippet-8-cp-0.005"><i class="fa fa-check"></i><b>12.4.6</b> Snippet 8: cp = 0.005</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="Decision_trees.html"><a href="Decision_trees.html#crossvalidation"><i class="fa fa-check"></i><b>12.5</b> Cross Validation</a>
<ul>
<li class="chapter" data-level="12.5.1" data-path="Decision_trees.html"><a href="Decision_trees.html#snippet-9-4"><i class="fa fa-check"></i><b>12.5.1</b> Snippet 9</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="Decision_trees.html"><a href="Decision_trees.html#rpartpredict"><i class="fa fa-check"></i><b>12.6</b> Prediction using rpart.</a>
<ul>
<li class="chapter" data-level="12.6.1" data-path="Decision_trees.html"><a href="Decision_trees.html#snippet-10"><i class="fa fa-check"></i><b>12.6.1</b> Snippet 10</a></li>
</ul></li>
<li class="chapter" data-level="12.7" data-path="Decision_trees.html"><a href="Decision_trees.html#snippet-11-your-model-with-rpart"><i class="fa fa-check"></i><b>12.7</b> Snippet 11: Your Model with rpart</a></li>
<li class="chapter" data-level="12.8" data-path="Decision_trees.html"><a href="Decision_trees.html#snippet-12-freestyle-rpart-combining-rpart-prediction-models"><i class="fa fa-check"></i><b>12.8</b> Snippet 12: Freestyle + rpart: Combining rpart prediction models</a></li>
<li class="chapter" data-level="12.9" data-path="Decision_trees.html"><a href="Decision_trees.html#snippet-13-submission-with-rpart"><i class="fa fa-check"></i><b>12.9</b> Snippet 13: Submission with rpart</a></li>
<li class="chapter" data-level="12.10" data-path="Decision_trees.html"><a href="Decision_trees.html#additional-reference-2"><i class="fa fa-check"></i><b>12.10</b> Additional Reference</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="Linear_regression.html"><a href="Linear_regression.html"><i class="fa fa-check"></i><b>13</b> 🔖 Linear Regression</a>
<ul>
<li class="chapter" data-level="13.1" data-path="Linear_regression.html"><a href="Linear_regression.html#introduction-6"><i class="fa fa-check"></i><b>13.1</b> Introduction</a></li>
<li class="chapter" data-level="13.2" data-path="Linear_regression.html"><a href="Linear_regression.html#lm"><i class="fa fa-check"></i><b>13.2</b> Linear regression using lm() function</a>
<ul>
<li class="chapter" data-level="13.2.1" data-path="Linear_regression.html"><a href="Linear_regression.html#snippet-1-how-much-do-midterm-project-and-final-exam-count"><i class="fa fa-check"></i><b>13.2.1</b> Snippet 1: How much do Midterm, Project and Final Exam count?</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="Linear_regression.html"><a href="Linear_regression.html#mse"><i class="fa fa-check"></i><b>13.3</b> Calculating the Error using mse()</a></li>
<li class="chapter" data-level="13.4" data-path="Linear_regression.html"><a href="Linear_regression.html#snippet-2-cross-validate-your-prediction"><i class="fa fa-check"></i><b>13.4</b> Snippet 2: Cross Validate your prediction</a></li>
<li class="chapter" data-level="13.5" data-path="Linear_regression.html"><a href="Linear_regression.html#snippet-3-submission-with-lm"><i class="fa fa-check"></i><b>13.5</b> Snippet 3: Submission with lm</a></li>
<li class="chapter" data-level="13.6" data-path="Linear_regression.html"><a href="Linear_regression.html#additional-reference-3"><i class="fa fa-check"></i><b>13.6</b> Additional Reference</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="Prediction_loop.html"><a href="Prediction_loop.html"><i class="fa fa-check"></i><b>14</b> 🔖 Machine Learning-Prediction Loop</a>
<ul>
<li class="chapter" data-level="14.1" data-path="Prediction_loop.html"><a href="Prediction_loop.html#introduction-7"><i class="fa fa-check"></i><b>14.1</b> Introduction</a></li>
<li class="chapter" data-level="14.2" data-path="Prediction_loop.html"><a href="Prediction_loop.html#additional-reference-4"><i class="fa fa-check"></i><b>14.2</b> Additional Reference</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="Mysteries_of_Aggregated_data.html"><a href="Mysteries_of_Aggregated_data.html"><i class="fa fa-check"></i><b>15</b> 🔖 How can data fool us?</a>
<ul>
<li class="chapter" data-level="15.1" data-path="Mysteries_of_Aggregated_data.html"><a href="Mysteries_of_Aggregated_data.html#introduction-8"><i class="fa fa-check"></i><b>15.1</b> Introduction</a>
<ul>
<li class="chapter" data-level="15.1.1" data-path="Mysteries_of_Aggregated_data.html"><a href="Mysteries_of_Aggregated_data.html#ecological-paradox"><i class="fa fa-check"></i><b>15.1.1</b> Ecological Paradox</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="Mysteries_of_Aggregated_data.html"><a href="Mysteries_of_Aggregated_data.html#additional-references-5"><i class="fa fa-check"></i><b>15.2</b> Additional References</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="22.html"><a href="22.html"><i class="fa fa-check"></i><b>16</b> Boundless Analytics - Pre-discovery Tool</a>
<ul>
<li class="chapter" data-level="16.1" data-path="22.html"><a href="22.html#introduction-9"><i class="fa fa-check"></i><b>16.1</b> Introduction</a></li>
<li class="chapter" data-level="16.2" data-path="22.html"><a href="22.html#minimarket-data-set-description"><i class="fa fa-check"></i><b>16.2</b> Minimarket Data Set description</a></li>
<li class="chapter" data-level="16.3" data-path="22.html"><a href="22.html#demo-of-boundless-analytics"><i class="fa fa-check"></i><b>16.3</b> Demo of Boundless Analytics</a></li>
<li class="chapter" data-level="16.4" data-path="22.html"><a href="22.html#the-boundless-analytics-web-application"><i class="fa fa-check"></i><b>16.4</b> The Boundless Analytics web application</a></li>
<li class="chapter" data-level="16.5" data-path="22.html"><a href="22.html#snippet-1-chi-square-hunt"><i class="fa fa-check"></i><b>16.5</b> Snippet 1: Chi square hunt</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="best_work_2022.html"><a href="best_work_2022.html"><i class="fa fa-check"></i><b>17</b> 🔖 Best Works of 2022</a>
<ul>
<li class="chapter" data-level="17.1" data-path="best_work_2022.html"><a href="best_work_2022.html#datablog"><i class="fa fa-check"></i><b>17.1</b> DataBlog</a></li>
<li class="chapter" data-level="17.2" data-path="best_work_2022.html"><a href="best_work_2022.html#boundless-analytics"><i class="fa fa-check"></i><b>17.2</b> Boundless Analytics</a></li>
</ul></li>
<li class="chapter" data-level="18" data-path="Leaderboard.html"><a href="Leaderboard.html"><i class="fa fa-check"></i><b>18</b> Data League Leaderboard</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./"></a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="prpart" class="section level1 hasAnchor" number="12">
<h1><span class="header-section-number">Section: 12</span> 🔖 Predictions with rpart<a href="Decision_trees.html#prpart" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<script src="files/js/dcl.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
<div id="introduction-5" class="section level2 hasAnchor" number="12.1">
<h2><span class="header-section-number">12.1</span> Introduction<a href="Decision_trees.html#introduction-5" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Decision trees are one of the most powerful and popular tools for classification and prediction. The reason decision trees are very popular is that they can generate rules which are easier to understand as compared to other models. They require much less computations for performing modeling and prediction. Both continuous/numerical and categorical variables are handled easily while creating the decision trees.</p>
</div>
<div id="rpart" class="section level2 hasAnchor" number="12.2">
<h2><span class="header-section-number">12.2</span> Use of Rpart<a href="Decision_trees.html#rpart" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Recursive Partitioning and Regression Tree <code>RPART</code> library is a collection of routines which implements a Decision Tree.The resulting model can be represented as a binary tree. For the purpose of illustration of rpart we will continue to use data puzzle 3.1 set - the Professor Moody data set.</p>
<p>The library associated with this <code>RPART</code> is called <code>rpart</code>. Install this library using <code>install.packages("rpart")</code>.</p>
<p>Syntax for building the decision tree using rpart():</p>
<ul>
<li><code>rpart( formula , method, data, control,...)</code>
<ul>
<li><em>formula</em>: here we mention the prediction column and the other related columns(predictors) on which the prediction will be based on.
<ul>
<li><code>prediction ~ predictor1 + predictor2 + predictor3 + ...</code></li>
</ul></li>
<li><em>method</em>: here we describe the type of decision tree we want. If nothing is provided, the function makes an intelligent guess. We can use “anova” for regression, “class” for classification, etc.</li>
<li><em>data</em>: here we provide the dataset on which we want to fit the decision tree on.</li>
<li><em>control</em>: here we provide the control parameters for the decision tree. Explained more in detail in the section further in this chapter.</li>
</ul></li>
</ul>
<p>For more info on the rpart function visit <a href="https://www.rdocumentation.org/packages/rpart/versions/4.1-15/topics/rpart">rpart documentation</a></p>
<p>Lets look at an example on the Moody 2022 dataset.</p>
<ul>
<li>We will use the rpart() function with the following inputs:
<ul>
<li>prediction -&gt; GRADE</li>
<li>predictors -&gt; SCORE, DOZES_OFF, TEXTING_IN_CLASS, PARTICIPATION</li>
<li>data -&gt; moody dataset</li>
<li>method -&gt; “class” for classification.</li>
</ul></li>
</ul>
<div id="snippet-1-9" class="section level3 hasAnchor" number="12.2.1">
<h3><span class="header-section-number">12.2.1</span> Snippet 1<a href="Decision_trees.html#snippet-1-9" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InIiLCJzYW1wbGUiOiJsaWJyYXJ5KHJwYXJ0KVxubW9vZHk8LXJlYWQuY3N2KCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vZGV2Nzc5Ni9kYXRhMTAxX3R1dG9yaWFsL21haW4vZmlsZXMvZGF0YXNldC9tb29keTIwMjJfbmV3LmNzdicpXG5cbiMgVXNlIG9mIHRoZSBycGFydCgpIGZ1bmN0aW9uLlxucnBhcnQoR1JBREUgfiBTQ09SRStET1pFU19PRkYrVEVYVElOR19JTl9DTEFTUytQQVJUSUNJUEFUSU9OLCBkYXRhID0gbW9vZHksbWV0aG9kID0gXCJjbGFzc1wiKSJ9
</div>
<p>We can see that the output of the rpart() function is the decision tree with details of,</p>
<ul>
<li>node -&gt; node number</li>
<li>split -&gt; split conditions/tests</li>
<li>n -&gt; number of records in either branch i.e. subset</li>
<li>yval -&gt; output value i.e. the target predicted value.</li>
<li>yprob -&gt; probability of obtaining a particular category as the predicted output.</li>
</ul>
<p>Using the output tree, we can use the predict function to predict the grades of the test data. We will look at this process later in section <a href="Decision_trees.html#rpartpredict">12.6</a></p>
<p>But coming back to the output of the rpart() function, the text type output is useful but difficult to read and understand, right! We will look at visualizing the decision tree in the next section.</p>
</div>
</div>
<div id="rpartplot" class="section level2 hasAnchor" number="12.3">
<h2><span class="header-section-number">12.3</span> Visualize the Decision tree<a href="Decision_trees.html#rpartplot" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To visualize and understand the rpart() tree output in the easiest way possible, we use a library called <code>rpart.plot</code>. The function <code>rpart.plot()</code> of the rpart.plot library is the function used to visualize decision trees.</p>
<p><em>NOTE</em>: The online runnable code block does not support <code>rpart.plot</code> library and functions, thus the output of the following code examples are provided directly.</p>
<div id="snippet-2-9" class="section level3 hasAnchor" number="12.3.1">
<h3><span class="header-section-number">12.3.1</span> Snippet 2<a href="Decision_trees.html#snippet-2-9" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div data-datacamp-exercise="" data-height="500" data-encoded="true">
eyJsYW5ndWFnZSI6InIiLCJzYW1wbGUiOiIjIEZpcnN0IGxldHMgaW1wb3J0IHRoZSBycGFydCBsaWJyYXJ5XG5saWJyYXJ5KHJwYXJ0KVxuXG4jIEltcG9ydCBkYXRhc2V0XG5tb29keTwtcmVhZC5jc3YoJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9kZXY3Nzk2L2RhdGExMDFfdHV0b3JpYWwvbWFpbi9maWxlcy9kYXRhc2V0L21vb2R5MjAyMl9uZXcuY3N2JylcblxuIyBVc2Ugb2YgdGhlIHJwYXJ0KCkgZnVuY3Rpb24uXG5ycGFydChHUkFERSB+IFNDT1JFK0RPWkVTX09GRitURVhUSU5HX0lOX0NMQVNTK1BBUlRJQ0lQQVRJT04sIGRhdGEgPSBtb29keSxtZXRob2QgPSBcImNsYXNzXCIpXG5cbiMgTm93IGxldHMgaW1wb3J0IHRoZSBycGFydC5wbG90IGxpYnJhcnkgdG8gdXNlIHRoZSBycGFydC5wbG90KCkgZnVuY3Rpb24uXG4jbGlicmFyeShycGFydC5wbG90KVxuXG4jIFVzZSBvZiB0aGUgcnBhcnQucGxvdCgpIGZ1bmN0aW9uICB0byB2aXN1YWxpemUgdGhlIGRlY2lzaW9uIHRyZWUuXG4jcnBhcnQucGxvdCh0cmVlKSJ9
</div>
<div class="figure">
<img src="https://raw.githubusercontent.com/dev7796/data101_tutorial/main/files/img/modeling/2022dt.png" alt="" />
<p class="caption">Output Plot of <em>rpart.plot()</em> function</p>
</div>
<p>We can see that after plotting the tree using rpart.plot() function, the tree is more readable and provides better information about the splitting conditions, and the probability of outcomes. Each leaf node has information about</p>
<ul>
<li>the grade category.</li>
<li>the outcome probability of each grade category.</li>
<li>the records percentage out of total records.</li>
</ul>
<p>To study more in detail the arguments that can be passed to the rpart.plot() function, please look at these guides <a href="https://www.rdocumentation.org/packages/rpart.plot/versions/3.0.9/topics/rpart.plot">rpart.plot</a> and <a href="http://www.milbo.org/doc/prp.pdf">Plotting with rpart.plot (PDF)</a></p>
<table>
<tbody>
<tr class="odd">
<td><strong>NOTE</strong>: In this chapter, from this point forward, the rpart.plots() generated in any example below will be shown as images, and also the code to generate those rpart.plots will be commented in the interactive code blocks. If you want to generate these plots yourself, please use a local Rstudio or R environment.</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="rpartcontrol" class="section level2 hasAnchor" number="12.4">
<h2><span class="header-section-number">12.4</span> Rpart Control<a href="Decision_trees.html#rpartcontrol" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now let’s look at the rpart.control() function used to pass the control parameters to the control argument of the rpart() function.</p>
<ul>
<li><code>rpart.control( *minsplit*, *minbucket*, *cp*,...)</code></li>
<li><em>minsplit</em>: the minimum number of observations that must exist in a node in order for a split to be attempted. For example, minsplit=500 -&gt; the minimum number of observations in a node must be 500 or up, in order to perform the split at the testing condition.</li>
<li><em>minbucket</em>: minimum number of observations in any terminal(leaf) node. For example, minbucket=500 -&gt; the minimum number of observation in the terminal/leaf node of the trees must be 500 or above.<br />
</li>
<li><em>cp</em>: complexity parameter. Using this informs the program that any split which does not increase the accuracy of the fit by <em>cp</em>, will not be made in the tree.</li>
</ul>
<p>For more information of the other arguments of the <code>rpart.control()</code> function visit <a href="https://www.rdocumentation.org/packages/rpart/versions/4.1-15/topics/rpart.control">rpart.control</a></p>
<p>Let look at few examples.</p>
<p>Suppose you want to set the control parameter minsplit=200.</p>
<div id="snippet-3-minsplit-200" class="section level3 hasAnchor" number="12.4.1">
<h3><span class="header-section-number">12.4.1</span> Snippet 3: Minsplit = 200<a href="Decision_trees.html#snippet-3-minsplit-200" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div data-datacamp-exercise="" data-height="500" data-encoded="true">
eyJsYW5ndWFnZSI6InIiLCJzYW1wbGUiOiJsaWJyYXJ5KHJwYXJ0KVxubW9vZHk8LXJlYWQuY3N2KCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vZGV2Nzc5Ni9kYXRhMTAxX3R1dG9yaWFsL21haW4vZmlsZXMvZGF0YXNldC9tb29keTIwMjJfbmV3LmNzdicpXG5cbiMgVXNlIG9mIHRoZSBycGFydCgpIGZ1bmN0aW9uIHdpdGggdGhlIGNvbnRyb2wgcGFyYW1ldGVyIG1pbnNwbGl0PTIwMFxudHJlZSA8LSBycGFydChHUkFERSB+IFNDT1JFK0RPWkVTX09GRitURVhUSU5HX0lOX0NMQVNTK1BBUlRJQ0lQQVRJT04sIGRhdGEgPSBtb29keSwgbWV0aG9kID0gXCJjbGFzc1wiLGNvbnRyb2w9cnBhcnQuY29udHJvbChtaW5zcGxpdCA9IDIwMCkpXG5cbnRyZWVcblxuI2xpYnJhcnkocnBhcnQucGxvdClcbiNycGFydC5wbG90KHRyZWUsZXh0cmEgPSAyKSJ9
</div>
<div class="figure">
<img src="https://raw.githubusercontent.com/dev7796/data101_tutorial/main/files/img/modeling/2022dt2.png" alt="" />
<p class="caption">Output tree plot of after setting minsplit=200 in rpart.control() function</p>
</div>
</div>
<div id="snippet-4-minsplit-100" class="section level3 hasAnchor" number="12.4.2">
<h3><span class="header-section-number">12.4.2</span> Snippet 4: Minsplit = 100<a href="Decision_trees.html#snippet-4-minsplit-100" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div data-datacamp-exercise="" data-height="500" data-encoded="true">
eyJsYW5ndWFnZSI6InIiLCJzYW1wbGUiOiJsaWJyYXJ5KHJwYXJ0KVxubW9vZHk8LXJlYWQuY3N2KCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vZGV2Nzc5Ni9kYXRhMTAxX3R1dG9yaWFsL21haW4vZmlsZXMvZGF0YXNldC9tb29keTIwMjJfbmV3LmNzdicpXG5cbiMgVXNlIG9mIHRoZSBycGFydCgpIGZ1bmN0aW9uIHdpdGggdGhlIGNvbnRyb2wgcGFyYW1ldGVyIG1pbnNwbGl0PTEwMFxudHJlZSA8LSBycGFydChHUkFERSB+IFNDT1JFK0RPWkVTX09GRitURVhUSU5HX0lOX0NMQVNTK1BBUlRJQ0lQQVRJT04sIGRhdGEgPSBtb29keSwgbWV0aG9kID0gXCJjbGFzc1wiLGNvbnRyb2w9cnBhcnQuY29udHJvbChtaW5zcGxpdCA9IDEwMCkpXG5cbnRyZWVcblxuI2xpYnJhcnkocnBhcnQucGxvdClcbiNycGFydC5wbG90KHRyZWUsZXh0cmEgPSAyKSJ9
</div>
<div class="figure">
<img src="https://raw.githubusercontent.com/dev7796/data101_tutorial/main/files/img/modeling/2022dt8.png" alt="" />
<p class="caption">Output tree plot of after setting minsplit=100 in rpart.control() function</p>
</div>
<p>We can see from the output of <code>tree$splits</code> and the tree plot, that at each split the total amount of observations are above 200 and 100. Also, in comparison to the tree without control, the tree with control has lower height, and lesser count of splits.</p>
<p>Now, lets set the minbucket parameter to 100, and see how that affects the tree parameters.</p>
</div>
<div id="snippet-5-minbucket-100" class="section level3 hasAnchor" number="12.4.3">
<h3><span class="header-section-number">12.4.3</span> Snippet 5: Minbucket = 100<a href="Decision_trees.html#snippet-5-minbucket-100" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div data-datacamp-exercise="" data-height="500" data-encoded="true">
eyJsYW5ndWFnZSI6InIiLCJzYW1wbGUiOiJsaWJyYXJ5KHJwYXJ0KVxubW9vZHk8LXJlYWQuY3N2KCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vZGV2Nzc5Ni9kYXRhMTAxX3R1dG9yaWFsL21haW4vZmlsZXMvZGF0YXNldC9tb29keTIwMjJfbmV3LmNzdicpXG5cbiMgVXNlIG9mIHRoZSBycGFydCgpIGZ1bmN0aW9uIHdpdGggdGhlIGNvbnRyb2wgcGFyYW1ldGVyIE1pbmJ1Y2tldD0xMDBcbnRyZWUgPC0gcnBhcnQoR1JBREUgfiBTQ09SRStET1pFU19PRkYrVEVYVElOR19JTl9DTEFTUytQQVJUSUNJUEFUSU9OLCBkYXRhID0gbW9vZHksIG1ldGhvZCA9IFwiY2xhc3NcIixjb250cm9sPXJwYXJ0LmNvbnRyb2wobWluYnVja2V0ID0gMTAwKSlcblxudHJlZVxuXG4jbGlicmFyeShycGFydC5wbG90KVxuI3JwYXJ0LnBsb3QodHJlZSxleHRyYSA9IDIpIn0=
</div>
<div class="figure">
<img src="https://raw.githubusercontent.com/dev7796/data101_tutorial/main/files/img/modeling/2022dt3.png" alt="" />
<p class="caption">Output tree plot of after setting minbucket=100 in rpart.control() function</p>
</div>
<p>We can see for the output and the tree plot, that the count of observations in each leaf node is greater than 100. Also, the tree height has shortened, suggesting that the control method was able to shorten the tree size.</p>
</div>
<div id="snippet-6-minbucket-200" class="section level3 hasAnchor" number="12.4.4">
<h3><span class="header-section-number">12.4.4</span> Snippet 6: Minbucket = 200<a href="Decision_trees.html#snippet-6-minbucket-200" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div data-datacamp-exercise="" data-height="500" data-encoded="true">
eyJsYW5ndWFnZSI6InIiLCJzYW1wbGUiOiJsaWJyYXJ5KHJwYXJ0KVxubW9vZHk8LXJlYWQuY3N2KCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vZGV2Nzc5Ni9kYXRhMTAxX3R1dG9yaWFsL21haW4vZmlsZXMvZGF0YXNldC9tb29keTIwMjJfbmV3LmNzdicpXG5cbiMgVXNlIG9mIHRoZSBycGFydCgpIGZ1bmN0aW9uIHdpdGggdGhlIGNvbnRyb2wgcGFyYW1ldGVyIE1pbmJ1Y2tldD0yMDBcbnRyZWUgPC0gcnBhcnQoR1JBREUgfiBTQ09SRStET1pFU19PRkYrVEVYVElOR19JTl9DTEFTUytQQVJUSUNJUEFUSU9OLCBkYXRhID0gbW9vZHksIG1ldGhvZCA9IFwiY2xhc3NcIixjb250cm9sPXJwYXJ0LmNvbnRyb2wobWluYnVja2V0ID0gMjAwKSlcblxudHJlZVxuXG4jbGlicmFyeShycGFydC5wbG90KVxuI3JwYXJ0LnBsb3QodHJlZSxleHRyYSA9IDIpIn0=
</div>
<div class="figure">
<img src="https://raw.githubusercontent.com/dev7796/data101_tutorial/main/files/img/modeling/2022dt4.png" alt="" />
<p class="caption">Output tree plot of after setting minbucket=200 in rpart.control() function</p>
</div>
<p>We can see for the output and the tree plot, that the count of observations in each leaf node is greater than 200. Also, the tree height has shortened, suggesting that the control method was able to shorten the tree size.</p>
<p>Lets now use the <code>cp</code> parameter and see its effect on the tree.</p>
</div>
<div id="snippet-7-cp-0.05" class="section level3 hasAnchor" number="12.4.5">
<h3><span class="header-section-number">12.4.5</span> Snippet 7: cp = 0.05<a href="Decision_trees.html#snippet-7-cp-0.05" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InIiLCJzYW1wbGUiOiJsaWJyYXJ5KHJwYXJ0KVxubW9vZHk8LXJlYWQuY3N2KCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vZGV2Nzc5Ni9kYXRhMTAxX3R1dG9yaWFsL21haW4vZmlsZXMvZGF0YXNldC9tb29keTIwMjJfbmV3LmNzdicpXG5cbiMgVXNlIG9mIHRoZSBycGFydCgpIGZ1bmN0aW9uIHdpdGggdGhlIGNvbnRyb2wgcGFyYW1ldGVyIGNwPTAuMlxudHJlZSA8LSBycGFydChHUkFERSB+IC4sIGRhdGEgPSBtb29keSxtZXRob2QgPSBcImNsYXNzXCIsY29udHJvbD1ycGFydC5jb250cm9sKGNwID0gMC4wNSkpXG5cbnRyZWVcblxuI2xpYnJhcnkocnBhcnQucGxvdClcbiNycGFydC5wbG90KHRyZWUpIn0=
</div>
<div class="figure">
<img src="https://raw.githubusercontent.com/dev7796/data101_tutorial/main/files/img/modeling/2022dt6.png" alt="" />
<p class="caption">Output tree plot of after setting cp=0.05 in rpart.control() function</p>
</div>
</div>
<div id="snippet-8-cp-0.005" class="section level3 hasAnchor" number="12.4.6">
<h3><span class="header-section-number">12.4.6</span> Snippet 8: cp = 0.005<a href="Decision_trees.html#snippet-8-cp-0.005" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div data-datacamp-exercise="" data-height="300" data-encoded="true">
eyJsYW5ndWFnZSI6InIiLCJzYW1wbGUiOiJsaWJyYXJ5KHJwYXJ0KVxubW9vZHk8LXJlYWQuY3N2KCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vZGV2Nzc5Ni9kYXRhMTAxX3R1dG9yaWFsL21haW4vZmlsZXMvZGF0YXNldC9tb29keTIwMjJfbmV3LmNzdicpXG5cbiMgVXNlIG9mIHRoZSBycGFydCgpIGZ1bmN0aW9uIHdpdGggdGhlIGNvbnRyb2wgcGFyYW1ldGVyIGNwPTAuMDA1XG50cmVlIDwtIHJwYXJ0KEdSQURFIH4gLiwgZGF0YSA9IG1vb2R5LG1ldGhvZCA9IFwiY2xhc3NcIixjb250cm9sPXJwYXJ0LmNvbnRyb2woY3AgPSAwLjAwNSkpXG5cbnRyZWVcblxuI2xpYnJhcnkocnBhcnQucGxvdClcbiNycGFydC5wbG90KHRyZWUpIn0=
</div>
<p><img src="https://raw.githubusercontent.com/dev7796/data101_tutorial/main/files/img/modeling/2022dt7.png" alt="Output tree plot of after setting cp=0.005 in rpart.control() function" />
We can see for the output and the tree plot, that the tree size has increased, with increase in number of splits, and leaf nodes. Also we can see that the minimum CP value in the output is 0.005.</p>
</div>
</div>
<div id="crossvalidation" class="section level2 hasAnchor" number="12.5">
<h2><span class="header-section-number">12.5</span> Cross Validation<a href="Decision_trees.html#crossvalidation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Overfitting takes place when you have a high accuracy on training dataset, but a low accuracy on the test dataset. But how do you know whether you are overfitting or not? Especially since you cannot determine accuracy on the test dataset? That is where cross-validation comes into play.</p>
<p>Because we cannot determine accuracy on test dataset, we partition our training dataset into train and validation (testing). We train our model (rpart or lm) on train partition and test on the validation partition. The partition is defined by split ratio. If split ratio =0.7, 70% of the training dataset will be used for the actual training of your model (rpart or lm), and 30 % will be used for validation (or testing). The accuracy of this validation data is called cross-validation accuracy.</p>
<p>To know if you are overfitting or not, compare the training accuracy with the cross-validation accuracy. If your training accuracy is high, and cross-validation accuracy is low, that means you are overfitting.</p>
<ul>
<li><code>cross_validate(*data*, *tree*, *n_iter*, *split_ratio*, *method*)</code>
<ul>
<li><em>data</em>: The dataset on which cross validation is to be performed.</li>
<li><em>tree</em>: The decision tree generated using rpart.</li>
<li><em>n_iter</em>: Number of iterations.</li>
<li><em>split_ratio</em>: The splitting ratio of the data into train data and validation data.</li>
<li><em>method</em>: Method of the prediction. “class” for classification.</li>
</ul></li>
</ul>
<p>The way the function works is as follows:</p>
<ul>
<li>It randomly partitions your data into training and validation.</li>
<li>It then constructs the following two decision trees on training partition:
<ul>
<li>The tree that you pass to the function.</li>
<li>The tree is constructed on all attributes as predictors and with no control parameters.
-It then determines the accuracy of the two trees on validation partition and returns you the accuracy values for both the trees.</li>
</ul></li>
</ul>
<p>The values in the first column(accuracy_subset) returned by cross-validation function are more important when it comes to detecting overfitting. If these values are much lower than the training accuracy you get, that means you are overfitting.</p>
<p>We would also want the values in accuracy_subset to be close to each other (in other words, have low variance). If the values are quite different from each other, that means your model (or tree) has a high variance which is not desired.</p>
<p>The second column(accuracy_all) tells you what happens if you construct a tree based on all attributes. If these values are larger than accuracy_subset, that means you are probably leaving out attributes from your tree that are relevant.</p>
<p>Each iteration of cross-validation creates a different random partition of train and validation, and so you have possibly different accuracy values for every iteration.</p>
<p>Let’s look at the cross_validate() function in action in the example below.</p>
<p>We will pass the tree with formula as <code>GRADE ~ SCORE+DOZES_OFF+TEXTING_IN_CLASS+PARTICIPATION</code>, and control parameter, with <code>minsplit=100</code>.
And for cross_validate() function, we will use<code>n_iter=5, and split_raitio=0.7</code></p>
<table>
<tbody>
<tr class="odd">
<td><strong>NOTE:</strong> Cross-Validation repository is already preloaded for the following interactive code block. Thus you can directly use the cross_validate() function in the following interactive code block. But if you wish to use the code_validate() function locally, please use</td>
</tr>
</tbody>
</table>
<pre><code>install.packages(&quot;devtools&quot;) 
devtools::install_github(&quot;devanshagr/CrossValidation&quot;)
CrossValidation::cross_validate()</code></pre>
<div id="snippet-9-4" class="section level3 hasAnchor" number="12.5.1">
<h3><span class="header-section-number">12.5.1</span> Snippet 9<a href="Decision_trees.html#snippet-9-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div data-datacamp-exercise="" data-height="500" data-encoded="true">
eyJsYW5ndWFnZSI6InIiLCJwcmVfZXhlcmNpc2VfY29kZSI6ImNyb3NzX3ZhbGlkYXRlIDwtIGZ1bmN0aW9uKGRmLCB0cmVlLCBuX2l0ZXIsIHNwbGl0X3JhdGlvLCBtZXRob2QgPSAnY2xhc3MnKVxue1xuICAjIHRyYWluaW5nIGRhdGEgZnJhbWUgZGZcbiAgZGYgPC0gYXMuZGF0YS5mcmFtZShkZilcblxuICAjIG1lYW5fc3Vic2V0IGlzIGEgdmVjdG9yIG9mIGFjY3VyYWN5IHZhbHVlcyBnZW5lcmF0ZWQgZnJvbSB0aGUgc3BlY2lmaWVkIGZlYXR1cmVzIGluIHRoZSB0cmVlIG9iamVjdFxuICBtZWFuX3N1YnNldCA8LSBjKClcblxuICAjIG1lYW5fYWxsIGlzIGEgdmVjdG9yIG9mIGFjY3VyYWN5IHZhbHVlcyBnZW5lcmF0ZWQgZnJvbSBhbGwgdGhlIGF2YWlsYWJsZSBmZWF0dXJlcyBpbiB0aGUgZGF0YSBmcmFtZVxuICBtZWFuX2FsbCA8LSBjKClcblxuICAjIGNvbnRyb2wgcGFyYW1ldGVycyBmb3IgdGhlIGRlY2lzaW9uIHRyZWVcbiAgY29udHJvID0gdHJlZSRjb250cm9sXG5cbiAgIyB0aGUgZm9sbG93aW5nIHNuaXBwZXQgd2lsbCBjcmVhdGUgcmVsYXRpb25zIHRvIGdlbmVyYXRlIGRlY2lzaW9uIHRyZWVzXG4gICMgcmVsYXRpb25fYWxsIHdpbGwgY3JlYXRlIGEgZGVjaXNpb24gdHJlZSB3aXRoIGFsbCB0aGUgZmVhdHVyZXNcbiAgIyByZWxhdGlvbl9zdWJzZXQgd2lsbCBjcmVhdGUgYSBkZWNpc2lvbiB0cmVlIHdpdGggb25seSB1c2VyLXNwZWNpZmllZCBmZWF0dXJlcyBpbiB0cmVlXG4gIGRlcCA8LSBhbGwudmFycyh0ZXJtcyh0cmVlKSlbMV1cbiAgaW5kZXAgPC0gbGlzdCgpXG4gIHJlbGF0aW9uX2FsbCA9IGFzLmZvcm11bGEocGFzdGUoZGVwLCAnLicsIHNlcCA9IFwiflwiKSlcbiAgaSA8LSAxXG4gIHdoaWxlIChpIDwgbGVuZ3RoKGFsbC52YXJzKHRlcm1zKHRyZWUpKSkpIHtcbiAgICBpbmRlcFtbaV1dIDwtIGFsbC52YXJzKHRlcm1zKHRyZWUpKVtpICsgMV1cbiAgICBpIDwtIGkgKyAxXG4gIH1cbiAgYiA8LSBwYXN0ZShpbmRlcCwgY29sbGFwc2UgPSBcIitcIilcbiAgcmVsYXRpb25fc3Vic2V0IDwtIGFzLmZvcm11bGEocGFzdGUoZGVwLCBiLCBzZXAgPSBcIn5cIikpXG5cbiAgIyBjcmVhdGluZyB0cmFpbiBhbmQgdGVzdCBzYW1wbGVzIHdpdGggdGhlIGdpdmVuIHNwbGl0IHJhdGlvXG4gICMgcGVyZm9ybWluZyBjcm9zcy12YWxpZGF0aW9uIG5faXRlciB0aW1lc1xuICBmb3IgKGkgaW4gMTpuX2l0ZXIpIHtcbiAgICBzYW1wbGUgPC1cbiAgICAgIHNhbXBsZS5pbnQobiA9IG5yb3coZGYpLFxuICAgICAgICAgICAgICAgICBzaXplID0gZmxvb3Ioc3BsaXRfcmF0aW8gKiBucm93KGRmKSksXG4gICAgICAgICAgICAgICAgIHJlcGxhY2UgPSBGKVxuICAgIHRyYWluIDwtIGRmW3NhbXBsZSxdXG4gICAgdGVzdGluZyAgPC0gZGZbLXNhbXBsZSxdXG4gICAgdHlwZSA9IHR5cGVvZih1bmxpc3QodGVzdGluZ1tkZXBdKSlcblxuICAgICMgZGVjaXNpb24gdHJlZSBmb3IgcmVncmVzc2lvbiBpZiB0aGUgbWV0aG9kIHNwZWNpZmllZCBpcyBcImFub3ZhXCJcbiAgICBpZiAobWV0aG9kID09ICdhbm92YScpIHtcbiAgICAgIGZpcnN0LnRyZWUgPC1cbiAgICAgICAgcnBhcnQoXG4gICAgICAgICAgcmVsYXRpb25fc3Vic2V0LFxuICAgICAgICAgIGRhdGEgPSB0cmFpbixcbiAgICAgICAgICBjb250cm9sID0gY29udHJvLFxuICAgICAgICAgIG1ldGhvZCA9ICdhbm92YSdcbiAgICAgICAgKVxuICAgICAgc2Vjb25kLnRyZWUgPC0gcnBhcnQocmVsYXRpb25fYWxsLCBkYXRhID0gdHJhaW4sIG1ldGhvZCA9ICdhbm92YScpXG4gICAgICBwcmVkMS50cmVlIDwtIHByZWRpY3QoZmlyc3QudHJlZSwgbmV3ZGF0YSA9IHRlc3RpbmcpXG4gICAgICBwcmVkMi50cmVlIDwtIHByZWRpY3Qoc2Vjb25kLnRyZWUsIG5ld2RhdGEgPSB0ZXN0aW5nKVxuICAgICAgbWVhbjEgPC0gbWVhbigoYXMubnVtZXJpYyhwcmVkMS50cmVlKSAtIHRlc3RpbmdbLCBkZXBdKSBeIDIpXG4gICAgICBtZWFuMiA8LSBtZWFuKChhcy5udW1lcmljKHByZWQyLnRyZWUpIC0gdGVzdGluZ1ssIGRlcF0pIF4gMilcbiAgICAgIG1lYW5fc3Vic2V0IDwtIGMobWVhbl9zdWJzZXQsIG1lYW4xKVxuICAgICAgbWVhbl9hbGwgPC0gYyhtZWFuX2FsbCwgbWVhbjIpXG4gICAgfVxuXG4gICAgIyBkZWNpc2lvbiB0cmVlIGZvciBjbGFzc2lmaWNhdGlvblxuICAgICMgaWYgdGhlIG1ldGhvZCBzcGVjaWZpZWQgaXMgbm90IFwiYW5vdmFcIiwgdGhlbiB0aGlzIGJsb2NrIGlzIGV4ZWN1dGVkXG4gICAgIyBpZiB0aGUgbWV0aG9kIGlzIG5vdCBzcGVjaWZpZWQgYnkgdGhlIHVzZXIsIHRoZSBkZWZhdWx0IG9wdGlvbiBpcyB0byBwZXJmb3JtIGNsYXNzaWZpY2F0aW9uXG4gICAgZWxzZXtcbiAgICAgIGZpcnN0LnRyZWUgPC1cbiAgICAgICAgcnBhcnQoXG4gICAgICAgICAgcmVsYXRpb25fc3Vic2V0LFxuICAgICAgICAgIGRhdGEgPSB0cmFpbixcbiAgICAgICAgICBjb250cm9sID0gY29udHJvLFxuICAgICAgICAgIG1ldGhvZCA9ICdjbGFzcydcbiAgICAgICAgKVxuICAgICAgc2Vjb25kLnRyZWUgPC0gcnBhcnQocmVsYXRpb25fYWxsLCBkYXRhID0gdHJhaW4sIG1ldGhvZCA9ICdjbGFzcycpXG4gICAgICBwcmVkMS50cmVlIDwtIHByZWRpY3QoZmlyc3QudHJlZSwgbmV3ZGF0YSA9IHRlc3RpbmcsIHR5cGUgPSAnY2xhc3MnKVxuICAgICAgcHJlZDIudHJlZSA8LVxuICAgICAgICBwcmVkaWN0KHNlY29uZC50cmVlLCBuZXdkYXRhID0gdGVzdGluZywgdHlwZSA9ICdjbGFzcycpXG4gICAgICBtZWFuMSA8LVxuICAgICAgICBtZWFuKGFzLmNoYXJhY3RlcihwcmVkMS50cmVlKSA9PSBhcy5jaGFyYWN0ZXIodGVzdGluZ1ssIGRlcF0pKVxuICAgICAgbWVhbjIgPC1cbiAgICAgICAgbWVhbihhcy5jaGFyYWN0ZXIocHJlZDIudHJlZSkgPT0gYXMuY2hhcmFjdGVyKHRlc3RpbmdbLCBkZXBdKSlcbiAgICAgIG1lYW5fc3Vic2V0IDwtIGMobWVhbl9zdWJzZXQsIG1lYW4xKVxuICAgICAgbWVhbl9hbGwgPC0gYyhtZWFuX2FsbCwgbWVhbjIpXG4gICAgfVxuICB9XG5cbiAgIyBhdmVyYWdlX2FjY3VyYWN5X3N1YnNldCBpcyB0aGUgYXZlcmFnZSBhY2N1cmFjeSBvZiBuX2l0ZXIgaXRlcmF0aW9ucyBvZiBjcm9zcy12YWxpZGF0aW9uIHdpdGggdXNlci1zcGVjaWZpZWQgZmVhdHVyZXNcbiAgIyBhdmVyYWdlX2FjdXJhY3lfYWxsIGlzIHRoZSBhdmVyYWdlIGFjY3VyYWN5IG9mIG5faXRlciBpdGVyYXRpb25zIG9mIGNyb3NzLXZhbGlkYXRpb24gd2l0aCBhbGwgdGhlIGF2YWlsYWJsZSBmZWF0dXJlc1xuICAjIHZhcmlhbmNlX2FjY3VyYWN5X3N1YnNldCBpcyB0aGUgdmFyaWFuY2Ugb2YgYWNjdXJhY3kgb2Ygbl9pdGVyIGl0ZXJhdGlvbnMgb2YgY3Jvc3MtdmFsaWRhdGlvbiB3aXRoIHVzZXItc3BlY2lmaWVkIGZlYXR1cmVzXG4gICMgdmFyaWFuY2VfYWNjdXJhY3lfYWxsIGlzIHRoZSB2YXJpYW5jZSBvZiBhY2N1cmFjeSBvZiBuX2l0ZXIgaXRlcmF0aW9ucyBvZiBjcm9zcy12YWxpZGF0aW9uIHdpdGggYWxsIHRoZSBhdmFpbGFibGUgZmVhdHVyZXNcbiAgY3Jvc3NfdmFsaWRhdGlvbl9zdGF0cyA8LVxuICAgIGxpc3QoXG4gICAgICBcImF2ZXJhZ2VfYWNjdXJhY3lfc3Vic2V0XCIgPSBtZWFuKG1lYW5fc3Vic2V0LCBuYS5ybSA9IFQpLFxuICAgICAgXCJhdmVyYWdlX2FjY3VyYWN5X2FsbFwiID0gbWVhbihtZWFuX2FsbCwgbmEucm0gPSBUKSxcbiAgICAgIFwidmFyaWFuY2VfYWNjdXJhY3lfc3Vic2V0XCIgPSB2YXIobWVhbl9zdWJzZXQsIG5hLnJtID0gVCksXG4gICAgICBcInZhcmlhbmNlX2FjY3VyYWN5X2FsbFwiID0gdmFyKG1lYW5fYWxsLCBuYS5ybSA9IFQpXG4gICAgKVxuXG4gICMgY3JlYXRpbmcgYSBkYXRhIGZyYW1lIG9mIGFjY3VyYWN5X3N1YnNldCBhbmQgYWNjdXJhY3lfYWxsXG4gICMgYWNjdXJhY3lfc3Vic2V0IGNvbnRhaW5zIG5faXRlciBhY2N1cmFjeSB2YWx1ZXMgb24gY3Jvc3MtdmFsaWRhdGlvbiB3aXRoIHVzZXItc3BlY2lmaWVkIGZlYXR1cmVzXG4gICMgYWNjdXJhY3lfYWxsIGNvbnRhaW5zIG5faXRlciBhY2N1cmFjeSB2YWx1ZXMgb24gY3Jvc3MtdmFsaWRhdGlvbiB3aXRoIGFsbCB0aGUgYXZhaWxhYmxlIGZlYXR1cmVzXG4gIGNyb3NzX3ZhbGlkYXRpb25fZGYgPC1cbiAgICBkYXRhLmZyYW1lKGFjY3VyYWN5X3N1YnNldCA9IG1lYW5fc3Vic2V0LCBhY2N1cmFjeV9hbGwgPSBtZWFuX2FsbClcbiAgcmV0dXJuKGxpc3QoY3Jvc3NfdmFsaWRhdGlvbl9kZiwgY3Jvc3NfdmFsaWRhdGlvbl9zdGF0cykpXG59Iiwic2FtcGxlIjoiIyBGaXJzdCBsZXRzIGltcG9ydCB0aGUgcnBhcnQgbGlicmFyeVxubGlicmFyeShycGFydClcbiMgSW1wb3J0IGRhdGFzZXRcbm1vb2R5PC1yZWFkLmNzdignaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2Rldjc3OTYvZGF0YTEwMV90dXRvcmlhbC9tYWluL2ZpbGVzL2RhdGFzZXQvbW9vZHkyMDIyX25ldy5jc3YnLHN0cmluZ3NBc0ZhY3RvcnMgPSBUKVxuIyBVc2Ugb2YgdGhlIHJwYXJ0KCkgZnVuY3Rpb24uXG50cmVlIDwtIHJwYXJ0KEdSQURFIH4gU0NPUkUrRE9aRVNfT0ZGK1RFWFRJTkdfSU5fQ0xBU1MsIGRhdGEgPSBtb29keSxtZXRob2QgPSBcImNsYXNzXCIsY29udHJvbCA9IHJwYXJ0LmNvbnRyb2wobWluc3BsaXQgPSAxMDApKVxudHJlZVxuIyBOb3cgbGV0cyBwcmVkaWN0IHRoZSBHcmFkZXMgb2YgdGhlIE1vb2R5IERhdGFzZXQuXG5wcmVkIDwtIHByZWRpY3QodHJlZSwgbW9vZHksIHR5cGU9XCJjbGFzc1wiKVxuaGVhZChwcmVkKVxuIyBMZXRzIGNoZWNrIHRoZSBUcmFpbmluZyBBY2N1cmFjeVxubWVhbihtb29keSRHUkFERT09cHJlZClcbiMgTGV0cyB1cyB0aGUgY3Jvc3NfdmFsaWRhdGUoKSBmdW5jdGlvbi5cbmNyb3NzX3ZhbGlkYXRlKG1vb2R5LHRyZWUsNSwwLjcpIn0=
</div>
<p>You can see that the cross-validation accuracies for the tree that was passed (accuracy_subset) are fairly high and close to our training accuracy of 84%. This means we are not overfitting. Also observe that accuracy_subset and accuracy_all have the same values, which means that the only relevant attributes are score and participation, and adding more attributes doesn’t make any difference to the tree. Finally, the values in accuracy_subset are reasonably close to each other, which mean low variance.</p>
</div>
</div>
<div id="rpartpredict" class="section level2 hasAnchor" number="12.6">
<h2><span class="header-section-number">12.6</span> Prediction using rpart.<a href="Decision_trees.html#rpartpredict" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Now that we have seen the process to create a decision tree and also plot it, we will like to use the output tree to predict the required attribute.</p>
<p>From the moody example, we are trying to predict the grade of students. Lets look at the <code>predict()</code> function to predict the outcomes.</p>
<ul>
<li><code>predict(*object*,*data*,*type*,...)</code>
<ul>
<li><em>object</em>: the generated tree from the rpart function.</li>
<li><em>data</em>: the data on which the prediction is to be performed.</li>
<li><em>type</em>: the type of prediction required. One of “vector”, “prob”, “class” or “matrix”.</li>
</ul></li>
</ul>
<p>Now lets use the predict function to predict the grades of students using the tree generated on the Moody dataset.</p>
<div id="snippet-10" class="section level3 hasAnchor" number="12.6.1">
<h3><span class="header-section-number">12.6.1</span> Snippet 10<a href="Decision_trees.html#snippet-10" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div data-datacamp-exercise="" data-height="500" data-encoded="true">
eyJsYW5ndWFnZSI6InIiLCJzYW1wbGUiOiIjIEZpcnN0IGxldHMgaW1wb3J0IHRoZSBycGFydCBsaWJyYXJ5XG5saWJyYXJ5KHJwYXJ0KVxuXG4jIEltcG9ydCBkYXRhc2V0XG5tb29keTwtcmVhZC5jc3YoJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9kZXY3Nzk2L2RhdGExMDFfdHV0b3JpYWwvbWFpbi9maWxlcy9kYXRhc2V0L21vb2R5MjAyMl9uZXcuY3N2JylcblxuIyBVc2Ugb2YgdGhlIHJwYXJ0KCkgZnVuY3Rpb24uXG50cmVlIDwtIHJwYXJ0KEdSQURFIH4gU0NPUkUrRE9aRVNfT0ZGK1RFWFRJTkdfSU5fQ0xBU1MrUEFSVElDSVBBVElPTiwgZGF0YSA9IG1vb2R5ICxtZXRob2QgPSBcImNsYXNzXCIpXG50cmVlXG5cbiMgTm93IGxldHMgcHJlZGljdCB0aGUgR3JhZGVzIG9mIHRoZSBNb29keSBEYXRhc2V0LlxucHJlZCA8LSBwcmVkaWN0KHRyZWUsIG1vb2R5LCB0eXBlPVwiY2xhc3NcIilcbmhlYWQocHJlZCkifQ==
</div>
</div>
</div>
<div id="snippet-11-your-model-with-rpart" class="section level2 hasAnchor" number="12.7">
<h2><span class="header-section-number">12.7</span> Snippet 11: Your Model with rpart<a href="Decision_trees.html#snippet-11-your-model-with-rpart" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div data-datacamp-exercise="" data-height="600" data-encoded="true">
eyJsYW5ndWFnZSI6InIiLCJzYW1wbGUiOiIjSG93IHRvIGNvbWJpbmUgeW91ciBmcmVlc3R5bGUgcHJlZGljdGlvbiBtb2RlbCB3aXRoIHRoZSBycGFydD8gXG5cbiNPbmUgd2F5IG9mIGRvaW5nIGl0IGlzIHRvIGRpdmlkZSB0aGUgZGF0YSBzZXRzIGludG8gdHdvIG11dHVhbGx5IGV4Y2x1c2l2ZSBzdWJzZXRzICh3aGljaCBjb3ZlciBhbGwgZGF0YSBhbHNvKS4gIEhvdyBkbyB5b3UgbWFrZSB0aGVzZSBzdWJzZXRzPyAgVW5mb3J0dW5hdGVseSB0aGVyZSBpcyBubyBhbGdvcml0aG0gZm9yIHRoaXMgYW5kIGl0IGlzIG1vcmUgcmVseWluZyBvbiBob3cgd2VsbCBpcyB5b3VyIG1vZGVsIGRvaW5nIGZvciBkaWZmZXJlbnQgc2xpY2VzIG9mIHRoZSBkYXRhLiAgXG5cbiNJbiB0aGlzIGV4YW1wbGUgKHNpbWlsYXJseSB0byBzbmlwcGV0IDE2Ljcgd2hlcmUgd2UgY29tYmluZSB0d28gcnBhcnQgbW9kZWxzLCB3ZSBhc3N1bWUgdGhhdCBpbml0aWFsIHNwbGl0IHdlIGRlY2lkZWQgb24gaXMgYmFzZWQgb24gU0NPUkUuIEJ1dCBpbnN0ZWFkIG9mIGhhdmluZyB0d28gcnBhcnQgbW9kZWxzICAoMTYuNyksIHdlIHdpbGwgdXNlIG91ciBwcmVkaWN0aW9uICBtb2RlbCBmcm9tIHByZWRpY3Rpb24gY2hhbGxlbmdlIDEgIGZvciBTQ09SRSA+NTAgYW5kIHJwYXJ0IGZvciBTQ09SRSA8PTUwLlxuXG4jTGV0cyBhc3N1bWUgdGhhdCB5b3VyUHJlZGljdGlvbiBpcyBvdXIgbW9kZWwgZnJvbSBQcmVkaWN0aW9uIENoYWxsZW5nZSAxICh5b3VyIGVudGlyZSBjb2RlIGhhcyB0byBiZSBhcHBsaWVkIGhlcmUgdG8gdGhlIGRhdGEgc2V0IChtb29keSwgYmVsb3cpXG5cbm1vb2R5PC1yZWFkLmNzdignaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2Rldjc3OTYvZGF0YTEwMV90dXRvcmlhbC9tYWluL2ZpbGVzL2RhdGFzZXQvbW9vZHkyMDIyX25ldy5jc3YnKVxuXG4jcnBhcnRNb2RlbDwtcnBhcnQoR1JBREV+LiwgZGF0YT1tb29keVttb29keSRTQ09SRTw9NTAsXSk7XG4jcHJlZF9ycGFydE1vZGVsIDwtIHByZWRpY3QocnBhcnRNb2RlbCwgbmV3ZGF0YT1tb29keVttb29keSRTQ09SRTw9NTAsXSwgdHlwZT1cImNsYXNzXCIpXG4jcHJlZF95b3VyTW9kZWwgPC0geW91clByZWRpY3Rpb25bbW9vZHkkU0NPUkU8PTUwXVxuI215cHJlZGljdGlvbjwtbW9vZHlcblxuIyMgSGVyZSB3ZSBjb21iaW5lIHR3byBtb2RlbHMgLSBvdXIgbW9kZWwgZnJvbSBwcmVkaWN0aW9uIDEgY2hhbGxlbmdlIGFuZCBycGFydC5cblxuI2RlY2lzaW9uIDwtIHJlcCgnRicsbnJvdyhteXByZWRpY3Rpb24pKVxuI2RlY2lzaW9uW215cHJlZGljdGlvbiRTQ09SRT41MF0gPC0gcHJlZF95b3VyTW9kZWxcbiNkZWNpc2lvbltteXByZWRpY3Rpb24kU0NPUkU8PTUwXSA8LWFzLmNoYXJhY3RlcihwcmVkX3JwYXJ0TW9kZWwgKVxuI215cHJlZGljdGlvbiRHUkFERSA8LWRlY2lzaW9uXG4jZXJyb3IgPC0gbWVhbihtb29keSRHUkFERSE9IG15cHJlZGljdGlvbiRHUkFERVxuI2Vycm9yIn0=
</div>
</div>
<div id="snippet-12-freestyle-rpart-combining-rpart-prediction-models" class="section level2 hasAnchor" number="12.8">
<h2><span class="header-section-number">12.8</span> Snippet 12: Freestyle + rpart: Combining rpart prediction models<a href="Decision_trees.html#snippet-12-freestyle-rpart-combining-rpart-prediction-models" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div data-datacamp-exercise="" data-height="600" data-encoded="true">
eyJsYW5ndWFnZSI6InIiLCJzYW1wbGUiOiJsaWJyYXJ5KHJwYXJ0KVxuIyBJbXBvcnQgZGF0YXNldFxubW9vZHk8LXJlYWQuY3N2KCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vZGV2Nzc5Ni9kYXRhMTAxX3R1dG9yaWFsL21haW4vZmlsZXMvZGF0YXNldC9tb29keTIwMjJfbmV3LmNzdicpXG5tb2RlbDE8LXJwYXJ0KEdSQURFfi4sIGRhdGE9bW9vZHlbbW9vZHkkU0NPUkU+NTAsXSk7XG5tb2RlbDI8LXJwYXJ0KEdSQURFfi4sIGRhdGE9bW9vZHlbbW9vZHkkU0NPUkU8PTUwLF0pO1xubW9kZWwxXG5tb2RlbDJcbnByZWQxIDwtIHByZWRpY3QobW9kZWwxLCBuZXdkYXRhPW1vb2R5W21vb2R5JFNDT1JFPjUwLF0sIHR5cGU9XCJjbGFzc1wiKVxucHJlZDIgPC0gcHJlZGljdChtb2RlbDIsIG5ld2RhdGE9bW9vZHlbbW9vZHkkU0NPUkU8PTUwLF0sIHR5cGU9XCJjbGFzc1wiKVxubXlwcmVkaWN0aW9uPC1tb29keVxuZGVjaXNpb24gPC0gcmVwKCdGJyxucm93KG15cHJlZGljdGlvbikpXG5kZWNpc2lvbltteXByZWRpY3Rpb24kU0NPUkU+NTBdIDwtIGFzLmNoYXJhY3RlcihwcmVkMSlcbmRlY2lzaW9uW215cHJlZGljdGlvbiRTQ09SRTw9NTBdIDwtYXMuY2hhcmFjdGVyKHByZWQyKVxubXlwcmVkaWN0aW9uJEdSQURFIDwtZGVjaXNpb25cbmVycm9yIDwtIG1lYW4obW9vZHkkR1JBREUhPSBteXByZWRpY3Rpb24kR1JBREUpXG5lcnJvciJ9
</div>
</div>
<div id="snippet-13-submission-with-rpart" class="section level2 hasAnchor" number="12.9">
<h2><span class="header-section-number">12.9</span> Snippet 13: Submission with rpart<a href="Decision_trees.html#snippet-13-submission-with-rpart" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div data-datacamp-exercise="" data-height="600" data-encoded="true">
eyJsYW5ndWFnZSI6InIiLCJzYW1wbGUiOiJsaWJyYXJ5KHJwYXJ0KVxudGVzdDwtcmVhZC5jc3YoJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9kZXY3Nzk2L2RhdGExMDFfdHV0b3JpYWwvbWFpbi9maWxlcy9kYXRhc2V0L00yMDIydGVzdFNOb0dyYWRlLmNzdicpXG5zdWJtaXNzaW9uPC1yZWFkLmNzdignaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2Rldjc3OTYvZGF0YTEwMV90dXRvcmlhbC9tYWluL2ZpbGVzL2RhdGFzZXQvTTIwMjJzdWJtaXNzaW9uLmNzdicpXG50cmFpbiA8LSByZWFkLmNzdihcImh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9kZXY3Nzk2L2RhdGExMDFfdHV0b3JpYWwvbWFpbi9maWxlcy9kYXRhc2V0L00yMDIydHJhaW4uY3N2XCIpXG5cbnRyZWUgPC0gcnBhcnQoR3JhZGUgfiBNYWpvcitTY29yZStTZW5pb3JpdHksIGRhdGEgPSB0cmFpbiwgbWV0aG9kID0gXCJjbGFzc1wiLGNvbnRyb2w9cnBhcnQuY29udHJvbChtaW5idWNrZXQgPSAyMDApKVxudHJlZVxuXG5wcmVkaWN0aW9uIDwtIHByZWRpY3QodHJlZSwgdGVzdCwgdHlwZT1cImNsYXNzXCIpXG5cbiNOb3cgbWFrZSB5b3VyIHN1Ym1pc3Npb24gZmlsZSAtIGl0IHdpbGwgaGF2ZSB0aGUgSURzIGFuZCBub3cgdGhlIHByZWRpY3RlZCBncmFkZXNcbnN1Ym1pc3Npb24kR3JhZGU8LXByZWRpY3Rpb24gXG5cbiMgdXNlIHdyaXRlLmNzdihzdWJtaXNzaW9uLCAnc3VibWlzc2lvbi5jc3YnLCByb3cubmFtZXM9RkFMU0UpIHRvIHN0b3JlIHN1Ym1pc3Npb24gYXMgY3N2IGZpbGUgb24geW91ciBtYWNoaW5lIGFuZCBzdWJzZXF1ZW50bHkgc3VibWl0IGl0IG9uIEthZ2dsZSJ9
</div>
</div>
<div id="additional-reference-2" class="section level2 hasAnchor" number="12.10">
<h2><span class="header-section-number">12.10</span> Additional Reference<a href="Decision_trees.html#additional-reference-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<button class="btn btn-primary" data-toggle="collapse" data-target="#dt12">
Prediction with rpart
</button>
<div id="dt12" class="collapse">
<embed src="https://docs.google.com/presentation/d/1Yw11iu0FnUbiNKrwEKyWHxZ1oXUVG0APfI9acEbB91o/edit?usp=sharing" width="100%" height="500px">
</embed>
</div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="Free_style.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="Linear_regression.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdemo.epub", "bookdemo.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "none"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
